---
title: "CrÃ©ation de l'application Flots - Partie 1"
authors: ["Erwan COUBRET"]
tags: ["Application", "IA", "Organisation", "DÃ©veloppement"]
date: "16/02/2025"
---

# CrÃ©ation de l'application Flots ğŸŒŠ - Partie 1

Depuis quelques mois, j'ai l'idÃ©e de dÃ©velopper une application qui permettrait de gÃ©rer Ã  la fois mes notes et mes tÃ¢ches, qui serait en quelque sorte un petit assistant personnel. Rien de rÃ©volutionnaire, mais j'aimerais avoir un outil optimal, permettant Ã  la fois une simplicitÃ© d'utilisation, tout en permettant une grande capacitÃ© de personnalisation. Ã‰galement, il faut qu'il soit accessible de partout : sur tÃ©lÃ©phone ou sur ordinateur. Pourquoi pas non plus y intÃ©grer un peu d'IA pour aider Ã  cette optimisation voulue.

J'ai commencÃ© Ã  m'atteler Ã  ce projet lors de ces vacances de la Toussaint 2024 pour en poser les bases. D'autres projets, les trop nombreux partiels et les fÃªtes de fin d'annÃ©e m'ont poussÃ© Ã  laisser ce dÃ©but d'application prendre la poussiÃ¨re pendant quelques mois. Heureusement, il y a de cela quelques semaines j'ai pu reprendre son dÃ©veloppement et je pense qu'il m'en faudra encore quelques-unes pour avoir un prototype rÃ©ellement satisfaisant.

J'avais envie de partager un peu mes avancements ! J'ai dÃ©jÃ  eu l'occasion de le faire en interne sur le discord de la communautÃ© Eos (ce site :) ), mais j'aimerais rajouter quelques complÃ©ments aux bouts de codes et aux captures d'Ã©crans que j'envoie Ã  des heures alÃ©atoires de la nuit. Je vais donc vous expliquer un peu les backstages du projet : des idÃ©es et designs jusqu'aux choix des technos et leur implÃ©mentation.

> Pour la petite prÃ©sentation, je suis [Erwan COUBRET](https://www.erwancoubret.fr/) et je suis en Ã©cole d'ingÃ© sur Strasbourg. J'ai un cursus centrÃ© autour de l'informatique, avec une spÃ©cialisation en IA et science des donnÃ©es depuis septembre dernier. NÃ©anmoins, il n'y a pas de dÃ©veloppement web et d'application dans nos programmes donc j'ai choisi de m'y intÃ©resser suite Ã  une opportunitÃ© de travail en freelance, et j'ai bien aimÃ© ! AprÃ¨s m'Ãªtre formÃ© et avoir travaillÃ© pendant 7/8 mois en tant que dÃ©veloppeur full-stack sur des projets existants, je me suis dit que cela pourrait Ãªtre rigolo de lancer sa propre appli pour apprendre les points que je n'avais pas eu l'occasion de dÃ©velopper.

---

<SectionTitle>
## Un bon commencement
</SectionTitle>

Je vais parler un peu du contexte et du design, pour mes vrais techos qui ne jurent que par les technos vous pouvez sauter Ã  la section *Le setup et les technos*.
### L'idÃ©e

L'initiative du dÃ©veloppement prend suite Ã  une remarque personnelle que je me suis faite l'Ã©tÃ© dernier : je ne connaissais pas d'application qui puisse me permettre de gÃ©rer mon emploi du temps et mes tÃ¢ches de maniÃ¨re trÃ¨s mallÃ©able, tout en servant Ã©galement de dÃ©pÃ´t pour des notes personnelles facilement organisables, avec un support [markdown](https://www.markdownguide.org/basic-syntax/) si possible.

J'ai remarquÃ© que de nombreuses personnes (dont moi-mÃªme) utilisent des messageries pour s'envoyer Ã  eux mÃªme des messages informatifs, des contacts, etc. ou se servent de leur application de note native du tÃ©lÃ©phone pour se noter les choses Ã  faire et y rÃ©pertorier des infos en vrac. Des applications comme Notion, Obsidian existent dÃ©jÃ  et sont trÃ¨s utilisÃ©es et rÃ©pondent Ã  une partie des problÃ©matiques, nÃ©anmoins elles demandent un temps d'apprÃ©hension assez long et sont clairement amÃ©liorables sur certains points pour avoir longuement essayÃ© les deux (et utilisant actuellement Obsidian pour Ã©crire ce post).

L'idÃ©e est alors d'essayer de dÃ©velopper moins d'outils qu'eux, mais de les optimiser au maximum pour une praticitÃ© Ã  l'usage quotidien. Pour les tÃ¢ches, j'ai Ã©galement eu l'occasion de travailler en freelance pour [Komia](https://www.komia.io/), un ERP pour les restaurateurs qui avait un systÃ¨me de tÃ¢ches trÃ¨s dÃ©veloppÃ© et que j'estime Ãªtre adaptable et amÃ©liorable pour une utilisation destinÃ©e au particulier.

<Note>
Il y aurait Ã©galement d'autres features Ã  dÃ©velopper que j'ai en tÃªte mais il faudra attendre les prochains opus de cet article.
</Note>

### Maquette & Design

En tant que bon ingÃ©nieur, j'aime souvent commencer par le design?????!!! Non, il s'agit de quelque chose de plutÃ´t rare pour notre genre, mais qui est trÃ¨s utile pour avoir une idÃ©e d'oÃ¹ l'on va (et il faut que je rentabilise mon abonnement adobe). Donc je sors [Illustrator](https://www.adobe.com/products/illustrator.html) pour commencer Ã  jeter 2/3 premiÃ¨res idÃ©es de logos discutables, puis je m'attaque Ã  la maquette sur [Figma](https://www.figma.com/fr-fr/design/) pour visualiser la disposition des notes et des tÃ¢ches.

<Picture src="Figma1.png" />

Cette version ne restera pas longtemps en vigueur, et je prendrais du temps pour crÃ©er une identitÃ© qui sera davantage convaincante. J'ai eu l'idÃ©e de "flots" comme nom sur un coup de tÃªte, Ã§a ressemblait Ã  "flow/workflow" et Ã§a se prononce en anglais (âœ¨ğŸŒŸfloTeSssğŸŒŸâœ¨). Pour coller avec le nom, il nous fallait une jolie vague en logo. J'ai donc passÃ© 2 (DEUX!!) jours Ã  batailler avec des cercles dans le but d'avoir quelque chose de proportionnellement et de gÃ©omÃ©triquement correct, qui rende bien Ã  lâ€™Å“il de prÃ¨s et de loin. RÃ©sultat : 1 - je dÃ©teste les cercles ; mais : 2 - je suis plutÃ´t content du rÃ©sultat !

Je vous laisse une premiÃ¨re vision de l'enfer que j'ai vÃ©cu et toutes les versions nÃ©cessaires pour passer d'un petit dessin sur feuille A4 Ã  un logo bien propre ğŸ¤µ (les petites Ã©toiles ne vont pas rester mais j'aimais bien sur le coup)

<Picture src="IllustratorLogo1.png" />

<Picture src="Flots-logo.png" />

Et j'ai ensuite pu commencer Ã  faire un premier jet de la version mobile sur Figma grÃ¢ce Ã  la nouvelle identitÃ© :

<Picture src="Pasted image 20250213232907.png" little/>

### Le setup et les technos

<Note>
Voici la section oÃ¹ l'on va perdre le commun de mortels ! NÃ©anmoins si le monde du web vous intÃ©resse et que vous souhaitez vous pencher sur ses grands principes, essayez de cerner les diffÃ©rences entre **backend** et **frontend**, j'ai lu en diagonal ce site qui a l'air pas mal : https://blog.lesjeudis.com/developpement-front-end-et-back-end-quelles-differences, sinon vous trouverez assez facilement par vous mÃªme.
</Note>

Pour le **frontend**, j'ai choisi de me tourner vers [Ionic](https://ionicframework.com/), un framework qui permet d'adapter du [React](https://react.dev/) en code natif pour diffÃ©rents supports dont les mobiles. C'est Ã  dire qu'avec la mÃªme base de code, je produis Ã  la fois la version web accessible sur les navigateurs, ainsi que la version mobile qui sera publiÃ©e sur les stores Android et iOS. Cela permet une grande rapiditÃ© de dÃ©veloppement. Pour le choix de ReactJS, il s'agit d'un framework que j'apprÃ©cie utiliser et dont j'en connais bien la logique.

Pour le **backend**, l'idÃ©e initiale fut de me tourner vers du [NodeJS](https://nodejs.org/en) avec [ExpressJS](https://expressjs.com/). L'avantage de ce combo est qu'il permet une grande mallÃ©abilitÃ© pour le code, avec donc aucune restriction d'architecture pour permettre de crÃ©er quelque chose d'adaptÃ© Ã  chaque projet. NÃ©anmoins, il s'agit d'une mÃ©thode que je dirais *rustique* ğŸ¦£, car elle demande de quasiment tout rÃ©-implÃ©menter (les middelwares, pas d'orm, les systÃ¨mes d'authentification, etc.).

Toussaint dernier, avec [Sylvain BROCAS](https://www.linkedin.com/in/sylvain-brocas-b52571246/) qui souhaitait contribuer au dÃ©but du dÃ©veloppement de l'application, nous avons pris deux jours pour nous retrouver sur Paris et enfin nous mettre Ã  coder. C'est toujours plus sympa de donner un peu de concret aux projets sur lesquels on travaille. AprÃ¨s quelques heures passÃ©es dans une bibliothÃ¨que, vous pouvez observer mon grand sourire (ğŸ˜¬) aprÃ¨s avoir setup correctement le front et l'avoir lancÃ© sur mon tÃ©lÃ©phone : 

<Picture src="Pasted image 20250213214002.png" />

En parallÃ¨le, Sylvain s'occupait de configurer le backend, puis je l'ai rejoint pour que l'on puisse structurer le code avec des bases d'architecture hexagonale. Avoir une architecture avancÃ©e nâ€™est pas forcÃ©ment nÃ©cessaire pour de petits projets, mais je trouve intÃ©ressant d'essayer de configurer de soi-mÃªme de telles structures. Cela implique quelques jours de setup en plus, mais ensuite tout roule facilement parce que le code est propre. Un mal pour un bien finalement.

Petite anecdote : en voulant retourner travailler dans la bibliothÃ¨que le lendemain matin, on s'est rendu compte le nez devant la porte (aprÃ¨s 45 min de mÃ©tro) qu'on Ã©tait un jour fÃ©riÃ©, et que toutes les bibliothÃ¨ques de la zone parisienne Ã©taient logiquement fermÃ©es. On n'a pas trop trouvÃ© mieux comme idÃ©e de s'installer dans un parc et de nous remettre Ã  coder. Ã‰videmment il s'agissait du jour de la semaine oÃ¹ la tempÃ©rature avait bien descendu, alors on errait en quÃªte de bars/restos pour se rÃ©chauffer, et de prises pour que Sylvain puisse recharger la brique qui lui sert d'ordi. On vous laisse cette magnifique photo du moment oÃ¹ nous avions terminÃ© d'implÃ©menter le premier visuel du frontend :

<Picture src="flots2.jpg" />

Pour la base de donnÃ©es, on a d'abord essayÃ© d'utiliser MongoDB, mais on s'est finalement tournÃ© vers PostgreSQL qui est bien plus pratique d'utilisation et mallÃ©able selon nos besoins.

AprÃ¨s ces 2 jours parisiens, j'ai continuÃ© Ã  finir de configurer mon backend, crÃ©er les middlewares, la gestion d'authentification avec les JWT. J'ai mÃªme pris du temps pour faire une belle console avec des couleurs pour faciliter le dÃ©veloppement futur, on fait les choses biens quand mÃªme ğŸ¤µâœ¨ :

<Picture src="Pasted image 20250215015226.png" />

Tout fier du setup du backend qui m'aura pris tout de mÃªme quelques temps, j'envoie sur le serveur discord d'Eos si quelqu'un est disponible pour me donner des retours sur ce que j'ai fait, car je n'avais jamais mis en place moi-mÃªme un backend. Je reÃ§ois alors un un fabuleux message qui m'indique un point crucial. Il me fera remarquer que de vouloir tout construire de soi mÃªme sans utiliser de framework c'est certes trÃ¨s formateur, mais ce n'est pas pas trop utilisable : cela demande d'implÃ©menter beaucoup de choses par soi-mÃªme, souvent avec les premiÃ¨res librairies qui tombent sous la main, en ayant pas forcÃ©ment conscience de potentielles failles de sÃ©curitÃ©, de problÃ¨mes de dÃ©pendances. Donc la proposition d'AdonisJS m'a pas mal plue. [Killian](https://www.linkedin.com/in/killianvincent/) m'a ensuite envoyÃ© 2 vidÃ©os de ***3 heures*** rÃ©alisÃ©es par quelqu'un de la core team d'Adonis et qui explique les avantages du framewor ... et elles m'ont clairement convaincues.

<Note>
Les voici : [PrÃ©sentation d'AdonisJS 6](https://www.youtube.com/watch?v=eLNg9yelCqw), [ModÃ¨le MVC, architecture n-tier, hexagonal en TypeScript via AdonisJS 6](https://www.youtube.com/watch?v=bZRyqWImbPQ).
</Note>


<Picture src="Pasted image 20250214201003.png" />

Ces deux lignes de rÃ©ponses m'ont rajoutÃ© quelques semaines de travail en plus car j'ai dÃ©cidÃ© de jeter tout le backend dÃ©jÃ  rÃ©alisÃ© pour le refaire avec Adonis. La techno est trÃ¨s modulable : dÃ©jÃ  elle n'impose pas d'architecture comme certains autres frameworks, ce que j'apprÃ©cie. Cela demande de s'assurer que tout est bien connectÃ© au niveau des configurations mais c'est faisable, et la techno laisse vraiment libre des outils que l'on souhaite utiliser en proposant une base (config, routing controller, env, hashing, etc.) Ã  laquelle on peut greffer tout un tas de modules comme un ORM, un service dâ€™authentification, et plein d'autres choses.

Je vous invite vraiment Ã  aller voir les vidÃ©os partagÃ©es plus haut, Romain LANZ fait vraiment un super taff explicatif d'Adonis, c'est l'une des personne de la core team du projet donc elle s'y connaÃ®t vraiment.

VoilÃ  Ã  quoi ressemble l'architecture du back Ã  la fin de la configuration, et avec beaucoup de parties qui restent propres Ã  Adonis :

```sh
.
â”œâ”€â”€ bin
â”‚   â”œâ”€â”€ console.ts
â”‚   â”œâ”€â”€ server.ts
â”‚   â””â”€â”€ test.ts
â”œâ”€â”€ config
â”‚   â”œâ”€â”€ app.ts
â”‚   â”œâ”€â”€ auth.ts
â”‚   â”œâ”€â”€ bodyparser.ts
â”‚   â”œâ”€â”€ cors.ts
â”‚   â”œâ”€â”€ database.ts
â”‚   â”œâ”€â”€ hash.ts
â”‚   â”œâ”€â”€ logger.ts
â”‚   â””â”€â”€ session.ts
â”œâ”€â”€ database
â”‚   â””â”€â”€ migrations
â”‚       â””â”€â”€ ...
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ env.ts
â”‚   â”œâ”€â”€ exceptions
â”‚   â”‚   â””â”€â”€ handler.ts
â”‚   â”œâ”€â”€ kernel.ts
â”‚   â”œâ”€â”€ middleware
â”‚   â”‚   â”œâ”€â”€ auth_middleware.ts
â”‚   â”‚   â”œâ”€â”€ container_bindings_middleware.ts
â”‚   â”‚   â”œâ”€â”€ force_json_response_middleware.ts
â”‚   â”‚   â”œâ”€â”€ guest_middleware.ts
â”‚   â”‚   â””â”€â”€ silent_auth_middleware.ts
â”‚   â”œâ”€â”€ modules
â”‚   â”‚   â”œâ”€â”€ Note # (rien encore pour l'instant)
â”‚   â”‚   â””â”€â”€ User
â”‚   â”‚       â”œâ”€â”€ Application
â”‚   â”‚       â”‚   â”œâ”€â”€ Service
â”‚   â”‚       â”‚   â”‚   â””â”€â”€ user_service.ts
â”‚   â”‚       â”‚   â””â”€â”€ Validator
â”‚   â”‚       â”‚       â””â”€â”€ user_validator.ts
â”‚   â”‚       â”œâ”€â”€ Domain
â”‚   â”‚       â”‚   â”œâ”€â”€ Entity
â”‚   â”‚       â”‚   â”‚   â””â”€â”€ user.ts
â”‚   â”‚       â”‚   â””â”€â”€ Repository
â”‚   â”‚       â”‚       â””â”€â”€ user_repository.ts
â”‚   â”‚       â”œâ”€â”€ Infra
â”‚   â”‚       â”‚   â””â”€â”€ Repository
â”‚   â”‚       â”‚       â””â”€â”€ psql_user_repository.ts
â”‚   â”‚       â””â”€â”€ InterfaceAdapter
â”‚   â”‚           â””â”€â”€ HttpController
â”‚   â”‚               â””â”€â”€ user_controller.ts
â”‚   â”œâ”€â”€ providers
â”‚   â”‚   â””â”€â”€ app_provider.ts
â”‚   â””â”€â”€ routes.ts
â”œâ”€â”€ tests
â”œâ”€â”€ sessions
...
```

Pour le systÃ¨me d'authentification, j'avais utilisÃ© sur le backend prÃ©cÃ©dent un systÃ¨me de JsonWebToken, mais il s'agissait d'un choix non rÃ©flÃ©chi car je ne connaissais que celui-lÃ . Suite Ã  une explication des diffÃ©rents mÃ©canismes d'authentification grÃ¢ce Ã  [cette vidÃ©o](https://www.youtube.com/watch?v=7ALYvSN8XZQ&t=780s) rÃ©alisÃ©e encore par Romain LANZ (quel goat), j'ai pris le choix de partir sur un systÃ¨me de sessions par fichiers.

AprÃ¨s quelques tests postman et incorporation d'un contexte d'authentification cÃ´tÃ© frontend, on a un beau petit systÃ¨me de connexion / inscription : 

<Picture src="Pasted image 20250215094319.png" />

<Picture src="Pasted image 20250215094352.png" little/>

Ã€ partir de lÃ  on a une bonne structure de projet. On va enfin pouvoir commencer le corps de l'application et ses fonctionnalitÃ©s.

---

<SectionTitle>
## Le corps du projet
</SectionTitle>

### La crÃ©ation d'un classificateur de notes par IA

On avait parlÃ© au dÃ©but de l'article d'un systÃ¨me de classification automatique de notes, et bien c'est le moment de dÃ©velopper tout Ã§a ğŸ¤“. L'idÃ©e est de crÃ©er un systÃ¨me de catÃ©gories qui puissent Ãªtre suggÃ©rÃ©es Ã  l'utilisateur lorsqu'il Ã©crit une note. D'ailleurs, les astres s'alignent bien, car l'un des cours de mon Ã©cole nous demandait de faire un projet de classification. J'en ai profitÃ© pour demander aux profs de faire passer cette partie de l'application comme projet et ils ont acceptÃ© ğŸ«¡.

J'embrigade donc [Nathan WURPILLOT](https://www.linkedin.com/in/nathan-wurpillot-b187122b1/), mon duo habituel pour les projets de groupe Ã  l'Ã©cole avec lequel on est pas mal complÃ©mentaires.

##### Recherche des modÃ¨les et constitution des classes

Avant de se lancer dans le code, il fallait d'abord Ã©tablir un systÃ¨me de classification pertinent. On a dÃ©fini une liste de 10 catÃ©gories qui nous semblent regrouper la majoritÃ© des types de notes quâ€™un utilisateur pourrait rÃ©diger : *idÃ©e*, *liste*, *Ã©vÃ©nement*, *ressource*, *rÃ©union/compte-rendu*, *rÃ©flexion*, *tÃ¢che*, *veille*, *message*, et "*Ã  voir*" (vidÃ©os, livres, articles, ...). De plus on permet qu'un utilisateur puisse attribuer plusieurs catÃ©gories Ã  une mÃªme note.

##### Collecte et gÃ©nÃ©ration des donnÃ©es

Trouver un dataset qui colle vraiment au cadre de notre projet est difficile. Alors autant tester de crÃ©er le nÃ´tre. ProblÃ¨me : il faut en gÃ©nÃ©ral beaucoup de donnÃ©es pour pouvoir obtenir un modÃ¨le satisfaisant, et si on regarde nos notes de nos tÃ©lÃ©phones, on est bien loin du compte. Alors on va essayer de siphonner les applications de notes de gens qu'on connaÃ®t. On a mis en place un Google Forms qui expliquait notre dÃ©marche et on l'a partagÃ© en laissant la possibilitÃ© aux rÃ©pondants de classifier eux mÃªmes leur note.

<Picture src="Pasted image 20250215224928.png" />

<Picture src="Pasted image 20250215231642.png" />

En deux jours on a rÃ©coltÃ© environ 80 rÃ©ponses, ce qui est pas mal mais qui est trÃ¨s loin d'Ãªtre suffisant, d'autant plus qu'on a dÃ» en supprimer quelques-unes. On a aussi retirÃ© les infos trop personnelles qui n'avaient pas lieu d'Ãªtre donnÃ© en entraÃ®nement Ã  un modÃ¨le. AprÃ¨s nettoyage on en avait plus qu'une soixantaine d'exploitable rÃ©parties ainsi :

```
catÃ©gories de notes
ressource : 12, evenement : 3, idee : 7, a_voir : 8, message : 6, veille : 3, reflexion : 4, liste : 25, reunion : 3, tÃ¢ches : 6
```

On souhaite obtenir environ 50 notes par catÃ©gorie diffÃ©rente. Avoir une bonne homogÃ©nÃ©itÃ© de prÃ©sence est quelque chose d'important pour ne pas avoir un modÃ¨le qui Ã  terme ne favorise pas de catÃ©gories en particulier. Comme vous pouvez l'observer, on est loin du compte. Fort heureusement, il existe un super gÃ©nÃ©rateur de texte qui marche encore mieux avec des instances d'exemple : chatgpt. En lui donnant les notes d'une certaine catÃ©gorie, on a pu lui demander d'en gÃ©nÃ©rer d'autres qui pourraient appartenir Ã  cette mÃªme catÃ©gorie avec un habile prompt en entÃªte :

> Voici le travail, je vais envoyer un certains nombre de notes d'une certaine catÃ©gorie (parmi l'ensemble des catÃ©gories fourni prÃ©cÃ©demment en instruction) et l'objectif sera d'en gÃ©nÃ©rer de nouvelles dans le mÃªme style mais avec des variantes, potentiellement tournant autour d'autres thÃ¨mes. Il faut garder en tÃªte qu'il s'agit du type de notes que l'on peut noter sur son tÃ©lÃ©phone ou son ordinateur. Les notes seront gÃ©nÃ©rÃ©es en mode txt ou markdown (avec une variation entre les deux).

<Picture src="Pasted image 20250215232402.png" />

Ce prompt, nous l'avons amÃ©liorÃ© pour obtenir une structure de note plus ressemblante au rÃ©el :

> GÃ©nÃ¨re moi des notes un peu plus longues et plus "humaines", avec des irrÃ©gularitÃ©s dans les espaces, Ã©ventuellement des fautes, des abrÃ©viations. Ne force pas trop la chose mais un humain a tendance Ã  ne pas avoir un style hyper carrÃ© pour de simples notes, n'indente pas tout parfaitement, n'ajoute pas de ## pour spÃ©cifier de titre, de - pour spÃ©cifier des listes, etc.

AprÃ¨s cela nous avons eu quelques rÃ©sultats plutÃ´t satisfaisants, en voici des exemples :

```
Livres Ã  lire (ou relire)  
  1. Lâ€™Ã©tranger - Camus (dÃ©jÃ  commencÃ©)  
  2. Le Comte de Monte-Cristo (gros pavÃ©, prÃ©voir du temps)  
  3. Pourquoi jâ€™ai mangÃ© mon pÃ¨re (lÃ©ger et drÃ´le ?)  
  4. Fahrenheit 451 (science-fiction, classique)  
  5. Demain les chiens (?? pas sÃ»r du titre)  
  6. Les Fleurs du Mal (poÃ©sie)  
```
*Exemple de note gÃ©nÃ©rÃ©e de catÃ©gorie liste*

```
Projets divers :  
refaire chambre - peinture bleue claire ou gris ?  
acheter Ã©tagÃ¨re murale (ikea ou bricolage local)  
cours dâ€™italien - continuer appli ou prendre vrai prof ?  
test compost sur balcon, besoin de bac spÃ©cial ?  
tenter yoga - vidÃ©o youtube ou salle Ã  tester ?  
```
*Exemple de note gÃ©nÃ©rÃ©e de catÃ©gorie tÃ¢che (il s'en pose des questions chatgpt)*

```
tester combinaisons thÃ© + Ã©pices  
- cannelle & lavande  
- poivre noir & menthe  
- (doser prÃ©cis, voir si rÃ©pulsif insectes ou juste bon goÃ»t)  
```
*Petit bonus qui m'aura bien fait rigoler sur le coup, bien jouÃ© chatgpt*

GrÃ¢ce Ã  cette mÃ©thode, nous avons pu arriver Ã  cette rÃ©partition plutÃ´t homogÃ¨ne de nos donnÃ©es.

<Picture src="Pasted image 20250216091638.png" />

##### CrÃ©ation du premier modÃ¨le

On a ensuite cherchÃ© comment entraÃ®ner un modÃ¨le pour classifier ces notes. Nathan a testÃ© des mÃ©thodes classiques comme ***Bag of Words*** et ***TF-IDF***, qui fonctionnent bien sur des petits corpus (ensembles de mots) mais sont limitÃ©s sur des donnÃ©es textuelles complexes. Les rÃ©sultats n'Ã©tant pas satisfaisants, nous avons tentÃ© d'aller plus loin en se tournant vers des modÃ¨les plus puissants.

Nous avons optÃ© pour le fine-tuning de ***BERT*** pour notre tÃ¢che de classification de notes. BERT est reconnu pour sa capacitÃ© Ã  saisir les nuances contextuelles du langage, ce qui le rend efficace pour les tÃ¢ches de comprÃ©hension. Lâ€™inconvÃ©nient de ce modÃ¨le est quâ€™il est relativement ancien : il est paru en 2018, et vous savez Ã  quelle vitesse Ã©voluent les LLMs ces derniÃ¨res annÃ©es. NÃ©anmoins, de par son anciennetÃ© et sa popularitÃ©, il existe de nombreuses ressources explicatives de son fonctionnement.

<Note>
VoilÃ  pour les curieux un super article qui explique en dÃ©tail le process de fonctionnement de BERT : [BERT for Sequence Classification from Scratch â€” Code and Theory](https://medium.com/@alexmriggio/bert-for-sequence-classification-from-scratch-code-and-theory-fb88053800fa "https://medium.com/@alexmriggio/bert-for-sequence-classification-from-scratch-code-and-theory-fb88053800fa"). Et pour le mÃªme prix une ressource qui explique le fonctionnement des transformers qui propose des visuels de haute volÃ©e : [TRANSFORMERÂ EXPLAINER](https://poloclub.github.io/transformer-explainer/). C'est cadeau.
</Note>

Nous n'avons pas exactement utilisÃ© le modÃ¨le BERT mais ***DistilBERT***, une version allÃ©gÃ©e de BERT qui conserve une grande partie de ses performances tout en Ã©tant beaucoup moins lourd. Il est important d'utiliser des modÃ¨les lÃ©gers, car ils sont censÃ©s tourner sur des serveurs pour qu'ils soient utilisables pour l'application (et c'est moi qui paierai ces serveurs donc le moins lourd c'est le mieux ğŸ¤‘). 

Le modÃ¨le a Ã©tÃ© entraÃ®nÃ© sur notre petit dataset, et les rÃ©sultats sont plutÃ´t satisfaisants : une accuracy de 75 %. Ce nâ€™est pas parfait, mais ce nâ€™est pas un problÃ¨me, car l'idÃ©e est simplement de suggÃ©rer une catÃ©gorie Ã  l'utilisateur. Ce sera lui qui aura toujours le dernier mot sur le choix des catÃ©gories. C'est une bonne preuve de concept, au besoin on l'amÃ©liorera.

Comme vous avez pu l'observer, ce modÃ¨le est entraÃ®nÃ© Ã  associer une note Ã  des Ã©lÃ©ments d'une liste de catÃ©gories donnÃ©e. L'idÃ©al serait de pouvoir permettre Ã  l'utilisateur d'ajouter soi mÃªme ses propres catÃ©gories pour que l'application soit vraiment en accord avec la politique de personnalisation que j'aimerais lui donner.

##### Un modÃ¨le pour les catÃ©gories personnalisÃ©es

Si un utilisateur ajoute sa propre classe, il est impossible dâ€™entraÃ®ner un modÃ¨le spÃ©cifique Ã  cela. Mais nous pouvons nous tourner sur le principe du ***Zero-Shot Learning***. GrÃ¢ce Ã  certains modÃ¨les, on peut prÃ©dire une catÃ©gorie sans que le modÃ¨le ait Ã©tÃ© spÃ©cifiquement entraÃ®nÃ© dessus. Dans notre cas, nous utiliserons ***BART-large-mnli***.

Il suffit de lui fournir une liste de classes possibles avec sa description et il assigne la note Ã  la plus pertinente. Pour Ã©viter les erreurs absurdes, on a mis en place un seuil de confiance : si le score est trop bas, on ignore la suggestion.

Notre mÃ©thode finale combine donc notre modÃ¨le fine-tunÃ© pour les classes connues et le Zero-Shot Learning pour les nouvelles catÃ©gories dÃ©finies par lâ€™utilisateur. On garde ainsi un systÃ¨me Ã©volutif et flexible, qui peut sâ€™adapter aux besoins de chacun sans avoir Ã  rÃ©-entraÃ®ner un modÃ¨le Ã  chaque ajout de classe.

### La crÃ©ation des tÃ¢ches et des notes

En parallÃ¨le du dÃ©veloppement du modÃ¨le, je m'attelle Ã  la rÃ©alisation du systÃ¨me de gestion de notes et de tÃ¢ches. J'imagine un petit dashboard pour la version pc de l'application avec les zones oÃ¹ iront les widgets :

<Picture src="Pasted image 20250216125848.png" />

Il s'agit d'un visuel trÃ¨s rustique mais je pense que j'avais besoin d'un peu coder et de me projeter dans la logique de l'application avant d'ensuite repenser le tout. 

La crÃ©ation des notes est en soit trÃ¨s simple. Un titre, un contenu et une liste de catÃ©gories auxquelles elles sont associÃ©es, et c'est tout pour l'instant. AprÃ¨s crÃ©ation des routes cÃ´tÃ© api/backend, et tests de celles-ci avec [Bruno](https://www.usebruno.com/), un Ã©quivalent de postman open-source qui nous embÃªte pas tout le temps pour crÃ©er un compte (allez voir c'est sympa, et leur logo de chien est trop moche c'est hilarant). Ensuite pour l'intÃ©gration cÃ´tÃ© front, j'utilise la librairie [axios](https://axios-http.com/docs/intro) pour gÃ©rer les requÃªtes avec mes entÃªtes, la automatiquement les erreurs... J'utilise la librairie [Tanstack](https://tanstack.com/) (*anciennement react-query*), qui permet de faire une gestion des requÃªtes intelligemment avec des outils d'optimisation, de gÃ©rer les Ã©tats des requÃªtes (`loading`, `error`, `success`) ce qui est agrÃ©able Ã  ne pas recoder avec des useState et useEffect sur React.

Pour le widget, je l'ai fait sans maquette et pour le modal de crÃ©ation de la note, j'ai utilisÃ© par simplicitÃ© les composants fournis par Ionic. C'est trÃ¨s pratique pour faire du dÃ©veloppement de features rapide mais ils ne permettent que peu de personnalisation, ce qui n'est pas viable pour une application qui se veut Ãªtre trÃ¨s propre dans son utilisation.

<Picture src="Pasted image 20250216130048.png" />

<Picture src="Pasted image 20250216130102.png" />

Pour les catÃ©gories, on les ajoute les unes aprÃ¨s les autres aprÃ¨s des virgules, ce qui est trÃ¨s peu agrÃ©able mais qui permettait de tester correctement les notes avant qu'on implÃ©mente un systÃ¨me de catÃ©gorie proprement dans l'application.

La crÃ©ation du systÃ¨me de tÃ¢ches Ã©tait davantage intÃ©ressante. Il y aura dÃ©jÃ  besoin d'une logique plus poussÃ©e, et surtout il faut rÃ©flÃ©chir Ã  de nombreux paramÃ¨tres. [Florian LOLLIVIER](https://www.linkedin.com/in/florian-lollivier/), qui est pas mal friand de ce genre d'applications, a produit des petits schÃ©mas et a donnÃ© des exemples. On voit aussi qu'il diffÃ©rencie les tÃ¢ches plus ponctuelles des "habitudes" qui sont des tÃ¢ches rÃ©currentes selon le mois / la semaine.

<Picture src="Pasted image 20250216141452.png" little/>

<Picture src="Pasted image 20250216141501.png" little/>

L'idÃ©e gardÃ©e est de considÃ©rer les habitudes comme des tÃ¢ches et d'Ã©ventuellement crÃ©er plus tard des sections pour permettre de les dissocier. Au niveau de leur structure en base de donnÃ©es, ce sera la mÃªme chose. Pour l'instant on a quelque chose qui ressemble Ã  Ã§a pour l'entitÃ© `Task` :

```ts
export enum TaskStatus {
  TODO = 'todo',
  IN_PROGRESS = 'in_progress',
  DONE = 'done',
  SKIPPED = 'skipped',
}

export enum TaskType {
  UNIQUE = 'unique',
  WEEKLY = 'weekly',
  MONTHLY = 'monthly',
  YEARLY = 'yearly',
}

export enum ImportanceStatus {
  HIGH = 'high',
  MEDIUM = 'medium',
  LOW = 'low',
}

export interface SubTask {
  name: string
  status: TaskStatus
}

export interface UniqueTask {
  type: TaskType.UNIQUE
  startDate?: DateTime
  endDate?: DateTime
}

export interface WeeklyTask {
  type: TaskType.WEEKLY
  startDate?: DateTime
  endDate?: DateTime
  days: {
    day: 'monday' | 'tuesday' | 'wednesday' | 'thursday' | 'friday' | 'saturday' | 'sunday'
    time: string
  }[]
  endRecurrenceDate?: DateTime
}

export interface MonthlyTask {
  type: TaskType.MONTHLY
  startDate?: DateTime
  endDate?: DateTime
  week: 'first' | 'second' | 'third' | 'fourth' | 'last'
  day: 'monday' | 'tuesday' | 'wednesday' | 'thursday' | 'friday' | 'saturday' | 'sunday'
  time: string
  endRecurrenceDate?: DateTime
}

export interface YearlyTask {
  type: TaskType.YEARLY
  startDate?: DateTime
  endDate?: DateTime
  month:
    | 'january'
    | 'february'
    | 'march'
    | 'april'
    | 'may'
    | 'june'
    | 'july'
    | 'august'
    | 'september'
    | 'october'
    | 'november'
    | 'december'
  time: string
  day: number
}

export type TaskSchedule = UniqueTask | WeeklyTask | MonthlyTask | YearlyTask

export default class Task extends BaseModel {
  @column({ isPrimary: true })
  declare id: string

  @column()
  declare user_id: string

  @column()
  declare title: string

  @column()
  declare status: TaskStatus

  @column()
  declare description: string

  @column.dateTime()
  declare next_occurrence: DateTime | null

  @column()
  declare schedule: TaskSchedule

  @column()
  declare subtasks: SubTask[]

  @column()
  declare importance_status: ImportanceStatus | null
}
```

<Note>
Petite digression mais c'est vraiment agrÃ©able de bosser cÃ´tÃ© backend et frontend sur le mÃªme langage. LÃ  par exemple le fait de pouvoir copier/coller ces structures d'un cÃ´tÃ© comme de l'autre c'est super, merci le javascript :)
</Note>

Le point clÃ© dans la gestion des tÃ¢ches rÃ©currentes est de calculer correctement leur prochaine Ã©chÃ©ance (le champ `next_occurrence`). Une tÃ¢che rÃ©currente doit apparaÃ®tre Ã  son Ã©chÃ©ance prÃ©vue, mais si elle n'est pas complÃ©tÃ©e Ã  temps, elle ne doit pas Ãªtre automatiquement reportÃ©e Ã  l'occurrence suivante avant d'avoir Ã©tÃ© rÃ©alisÃ©e.

Prenons un exemple concret : imaginons une tÃ¢che Ã  accomplir tous les mardis et jeudis (par exemple, le mÃ©nage). Si l'utilisateur oublie de la faire le mardi, elle doit rester visible et Ãªtre signalÃ©e comme en retard jusqu'Ã  ce qu'elle soit complÃ©tÃ©e. L'application ne doit pas considÃ©rer automatiquement que lâ€™utilisateur a sautÃ© lâ€™Ã©chÃ©ance et la reporter Ã  jeudi, c'est Ã  l'utilisateur de le prÃ©ciser.

Le calcul de la prochaine occurrence doit donc se faire uniquement lorsque la tÃ¢che est marquÃ©e comme terminÃ©e. Si lâ€™utilisateur ne complÃ¨te la tÃ¢che du mardi que le vendredi, lâ€™application doit indiquer un retard de 3 jours et ne reprogrammer la tÃ¢che que pour le mardi suivant. Ainsi, lâ€™application peut permettre un suivi rigoureux des tÃ¢ches et Ã©vite quâ€™elles ne disparaissent sans avoir Ã©tÃ© effectuÃ©es.

Voici ensuite le widget des tÃ¢ches ainsi que le modal de crÃ©ation avec des rÃ©currences diffÃ©rentes :

<Picture src="Pasted image 20250216150045.png" />

<Picture src="Pasted image 20250216150225.png" />

<Picture src="Pasted image 20250216150232.png" />

Je n'apprÃ©cie vraiment pas cette organisation des paramÃ¨tres, et le design du modal de crÃ©ation que je trouve profondÃ©ment non-intuitive. Mais ne vous inquiÃ©tez pas, j'ai des idÃ©es pour amÃ©liorer cela.

### La dockerisation et les catÃ©gories

Roulement de tambours, j'ai enfin trouvÃ© quelqu'un pour m'accompagner sur le long terme pour le projet. Il s'agit d'[Adrien JAYAT](https://www.linkedin.com/in/adrien-jayat/) qui est dans ma formation et qui trouve que le projet est un bon prÃ©texte pour se mettre au web :) Il a quelques expÃ©riences niveau infrastructure de projets, en pipelines CI/CD. Il s'est occupÃ© de dockeriser proprement le backend. C'Ã©tait un peu long de setup les bases de donnÃ©es Ã  chaque fois Ã  la main, franchement il a gÃ©rÃ© c'est vraiment pratique. Il a aussi fait en sorte de pouvoir run le backend sur le rÃ©seau local, Ã§a demande un peu de config mais Ã§a nous permettra de tester l'application facilement sur mobile.

Il a aussi commencÃ© son apprentissage d'Adonis en mettant en place la structure des catÃ©gories et en faisant le controller. On a fait en sorte de ne pas se marcher dessus avec des Pull-Requests et des noms de commits cleans. De plus, quand on fait des modifications sur le backend, on demande Ã  l'autre de vÃ©rifier nos codes avant de merger. C'est forcÃ©ment un peu plus de temps de mise en place, mais Ã§a vaut vraiment le coup de prendre des plis de dÃ©veloppement professionnels. Le projet est bien plus propre comme cela et il nous Ã©vitera de gÃ©rer des millions de conflits.

<Picture src="Pasted image 20250216171504.png" />

Parlons des catÃ©gories. Elles auront une structure trÃ¨s simple. Un nom, une description pour permettre Ã  l'utilisateur de prÃ©ciser des informations pour faciliter leur dÃ©tection. On relit ensuite l'entitÃ© aux tables de notes et de tÃ¢ches grÃ¢ce Ã  une table de pivot. On permet aussi d'ajouter une couleur Ã  la tache, c'est pas encore implÃ©mentÃ© mais Ã§a le sera.

```ts
export default class Category extends BaseModel {
  @column({ isPrimary: true })
  declare id: string

  @column()
  declare user_id: string

  @column()
  declare name: string

  @column()
  declare description: string

  @column()
  declare color: string

  @manyToMany(() => Note, {
    pivotTable: 'category_note',
  })
  declare notes: ManyToMany<typeof Note>

  @manyToMany(() => Task, {
    pivotTable: 'category_task',
  })
  declare tasks: ManyToMany<typeof Task>
}
```

### Connexion de notre modÃ¨le Ã  l'appli

Vient maintenant le dernier point de cet article. Il s'agit du moment oÃ¹ nous allons relier notre modÃ¨le de prÃ©diction de catÃ©gories Ã  l'application. Pour cela nous nous sommes retrouvÃ©s chez Nathan, avec la compagnie de [Dorian CHEVALERIAS](https://www.dorian-chevalerias.com/), un mec trÃ¨s sympa de notre Ã©cole et chaud en IA. Il nous a prÃ©sentÃ© [FastAPI](https://fastapi.tiangolo.com/), un framework qui permet de dÃ©velopper trÃ¨s facilement une API python pour notre modÃ¨le.

On a codÃ© une bonne aprem jusqu'Ã  2h du mat, avec un petit break raclette pour prendre des forces.

<Picture src="Pasted image 20250216150637.png" />

Ce n'est pas la soirÃ©e oÃ¹ j'ai Ã©tÃ© le plus utile, j'ai surtout fait en sorte de bien rÃ©cupÃ©rer les rÃ©sultats que renvoyait l'API. Quant Ã  eux ils ont gÃ©rÃ©s pour l'intÃ©gration du modÃ¨le. Franchement Ã§a s'est fait trÃ¨s vite avec FastAPI, le framework porte bien son nom !

---

<SectionTitle>
## La suite ?
</SectionTitle>

Merci d'avoir lu jusqu'ici, vous en Ãªtes arrivÃ© Ã  la conclusion de ce pavÃ©. Le premier objectif maintenant est de repenser le design pour rendre l'application agrÃ©able d'utilisation, je vais essayer de faire en sorte qu'on ait notre style Ã  nous. Il reste encore Ã  coder la gestion de l'apparition des tÃ¢ches, avec le calcul des occurrences suivantes qu'on avait Ã©voquÃ© plus tÃ´t.

Pour arriver Ã  une V1 qui nous satisfera, il faudra encore faire une gestion des notifications de l'application sous ses diffÃ©rents supports (web/mobile), permettre de lier nos tÃ¢ches directement Ã  notre agenda. Pour le coup, Ã§a on ne s'imagine vraiment pas en recoder un, c'est souvent galÃ¨re, on fera en sorte de pouvoir de lier l'appli Ã  des services existant.

Une fois qu'on aura tout Ã§a, on commencera Ã  nous intÃ©resser au dÃ©ploiement, puis Ã  ajouter des nouvelles features, on en a quelques-unes en tÃªte :)

### Un financement participatif ?

Plus le temps avance, plus je me dis que ce projet serait idÃ©al pour qu'on le partage sur une plateforme de crowdfunding. Cela permettrait de soutenir le paiement des infrastructures, la communication, et de nous accompagner financiÃ¨rement dans le projet. Si l'idÃ©e vous intÃ©resse je vous laisse [me suivre sur Linkedin](https://www.linkedin.com/in/erwan-coubret/).

NÃ©anmoins je pense que cette campagne de financement ne commencera qu'Ã  mon retour en France aprÃ¨s mon stage d'Ã©tÃ© Ã  l'autre bout du monde. J'estimerai que si elle voit le jout, ce sera autour de novembre 2025, nous n'y sommes pas encore.

### Le mot de la fin

J'espÃ¨re que ce format d'article vous a plu. Je suis heureux d'avoir rÃ©ussi Ã  faire un point presque exhaustif de l'Ã©tat de l'avancement du projet. Je suis Ã©videmment ouvert Ã  tout retour / toute critique sur cet article ou ce projet, les idÃ©es sont aussi les bienvenues.

Je me permets d'en profiter pour vanter l'initiative Eos, que je porte avec d'autres amis et compÃ¨res. Si l'article vous a plu, notamment le fait de voir les points techniques d'un projet comme celui-ci, cela pourrait vous intÃ©resser. Notre objectif et de mettre en avant et d'encourager les "jeunes" lanceurs de projets dans le monde de la tech. Nous essayons de mobiliser dans un endroit commun des gens qui ont envie de faire des choses sympas, de collaborer, de recevoir des retours. Je vous laisse explorer ce site pour en apprendre plus, mais si vous voulez voir en temps rÃ©el la suite du projet, vous savez oÃ¹ aller.

J'aimerais encore une fois remercier tous les gens qui ont participÃ© de prÃ¨s ou de loin Ã  cette application, que ce soit Ã©videmment ceux qui y ont participÃ© directement, comme ceux qui donnent leurs avis ou impressions.

Je vous dis Ã  dans quelques mois pour le prochain opus de cette sÃ©rie.

Ã€+,

Erwan